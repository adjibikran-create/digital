<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Progress | StudyPlanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body class="light">

<header class="navbar">
  <h1 class="logo" data-key="logo">ðŸ“˜ StudyPlanner</h1>
  <nav>
    <a href="dashboard.html" data-key="navDashboard">Dashboard</a>
    <a href="planner.html" data-key="navPlanner">Study Plan</a>
    <a href="progress.html" class="active" data-key="navProgress">Progress</a>
    <a href="settings.html" data-key="navSettings">Settings</a>
    <button id="themeToggleHeader">ðŸŒ™</button>
  </nav>
</header>

<main class="progress-page">
  <h2 data-key="progressTitle">Your Study Progress</h2>
  <p data-key="progressIntro">Consistency today creates success tomorrow.</p>

  <div class="progress-card">
    <h3 data-key="overallCompletion">Overall Completion</h3>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <p class="progress-text" id="progressText">0%</p>
    <p id="progressMessage"></p>
  </div>

  <div class="progress-stats">
    <div class="card"><h4 data-key="totalTasks">Total Tasks</h4><p id="totalTasks">0</p></div>
    <div class="card"><h4 data-key="completedTasks">Completed</h4><p id="completedTasks">0</p></div>
    <div class="card"><h4 data-key="remainingTasks">Remaining</h4><p id="remainingTasks">0</p></div>
  </div>
</main>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const body=document.body;
  const themeHeaderBtn=document.getElementById("themeToggleHeader");

  const translations={
    en:{logo:"ðŸ“˜ StudyPlanner", navDashboard:"Dashboard", navPlanner:"Study Plan", navProgress:"Progress", navSettings:"Settings",
        progressTitle:"Your Study Progress", progressIntro:"Consistency today creates success tomorrow.",
        overallCompletion:"Overall Completion", totalTasks:"Total Tasks", completedTasks:"Completed", remainingTasks:"Remaining"},
    fr:{logo:"ðŸ“˜ Planificateur", navDashboard:"Tableau de bord", navPlanner:"Plan d'Ã©tude", navProgress:"ProgrÃ¨s", navSettings:"ParamÃ¨tres",
        progressTitle:"Votre progression", progressIntro:"La constance aujourd'hui crÃ©e le succÃ¨s de demain.",
        overallCompletion:"AchÃ¨vement global", totalTasks:"TÃ¢ches totales", completedTasks:"TerminÃ©es", remainingTasks:"Restantes"},
    es:{logo:"ðŸ“˜ Planificador", navDashboard:"Tablero", navPlanner:"Plan de estudio", navProgress:"Progreso", navSettings:"ConfiguraciÃ³n",
        progressTitle:"Tu progreso", progressIntro:"La consistencia de hoy crea Ã©xito maÃ±ana.",
        overallCompletion:"Completado general", totalTasks:"Tareas totales", completedTasks:"Completadas", remainingTasks:"Pendientes"}
  };

  let savedTheme=localStorage.getItem("theme")||"light";
  let savedLang=localStorage.getItem("language")||"en";
  body.classList.remove("light","dark");
  body.classList.add(savedTheme);
  themeHeaderBtn.textContent=savedTheme==="dark"?"â˜€ï¸":"ðŸŒ™";

  function updateLanguage(lang){
    document.querySelectorAll("[data-key]").forEach(el=>{
      const key=el.getAttribute("data-key");
      if(translations[lang][key]) el.innerText=translations[lang][key];
    });
  }
  updateLanguage(savedLang);

  themeHeaderBtn.addEventListener("click",()=>{
    const isLight=body.classList.contains("light");
    body.classList.remove(isLight?"light":"dark");
    body.classList.add(isLight?"dark":"light");
    localStorage.setItem("theme",isLight?"dark":"light");
    themeHeaderBtn.textContent=isLight?"â˜€ï¸":"ðŸŒ™";
  });

  // ---- PROGRESS LOGIC ----
  const tasks=JSON.parse(localStorage.getItem("tasks"))||[];
  const total=tasks.length;
  const completed=tasks.filter(t=>t.completed).length;
  const remaining=total-completed;
  const percent=total===0?0:Math.round((completed/total)*100);

  document.getElementById("totalTasks").textContent=total;
  document.getElementById("completedTasks").textContent=completed;
  document.getElementById("remainingTasks").textContent=remaining;
  document.getElementById("progressFill").style.width=percent+"%";
  document.getElementById("progressText").textContent=percent+"%";

  const message=document.getElementById("progressMessage");
  if(percent===0) message.textContent="Start planning today. Every step matters ðŸŒ±";
  else if(percent<50) message.textContent="Good start! Keep building consistency ðŸ’ª";
  else if(percent<80) message.textContent="Great work! You are on the right track ðŸš€";
  else message.textContent="Excellent discipline! Keep it up ðŸŒŸ";

});
</script>
</body>
</html>
