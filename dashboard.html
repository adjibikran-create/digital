<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | StudyPlanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body class="light">

<header class="navbar">
  <h1 class="logo" data-key="logo">ğŸ“˜ StudyPlanner</h1>
  <nav>
    <a href="dashboard.html" class="active" data-key="navDashboard">Dashboard</a>
    <a href="planner.html" data-key="navPlanner">Study Plan</a>
    <a href="progress.html" data-key="navProgress">Progress</a>
    <a href="settings.html" data-key="navSettings">Settings</a>
    <button id="themeToggleHeader">ğŸŒ™</button>
  </nav>
</header>

<main class="dashboard">
  <section class="welcome">
    <h2 data-key="welcomeTitle">Good Day, Student ğŸ‘‹</h2>
    <p data-key="welcomeText">Stay consistent. Small steps every day lead to success.</p>
  </section>

  <section class="stats">
    <div class="card">
      <h3 data-key="todayTasks">ğŸ“… Todayâ€™s Tasks</h3>
      <p class="number" id="tasksCount">0</p>
    </div>
    <div class="card">
      <h3 data-key="completedTasks">âœ… Completed</h3>
      <p class="number" id="completedCount">0</p>
    </div>
    <div class="card">
      <h3 data-key="weeklyGoal">ğŸ¯ Weekly Goal</h3>
      <p class="number">80%</p>
    </div>
    <div class="card">
      <h3 data-key="progress">ğŸ“ˆ Progress</h3>
      <p class="number" id="progressPercent">0%</p>
    </div>
  </section>

  <section class="tasks">
    <h3 data-key="todayFocus">Todayâ€™s Focus</h3>
    <ul id="tasksList"></ul>
  </section>
</main>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const body = document.body;
  const themeHeaderBtn = document.getElementById("themeToggleHeader");
document.addEventListener("DOMContentLoaded", () => {
  const tasksList = document.getElementById("tasksList");
  const tasksCount = document.getElementById("tasksCount");
  const completedCount = document.getElementById("completedCount");
  const progressPercent = document.getElementById("progressPercent");

  let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

  function renderTasks() {
    tasksList.innerHTML = "";
    tasks.forEach((task, index) => {
      const li = document.createElement("li");
      li.className = task.completed ? "done" : "";
      li.innerHTML = `
        <span>${task.subject} - ${task.duration} - ${task.day}</span>
        <div>
          <button class="complete-btn">âœ”</button>
          <button class="delete-btn">ğŸ—‘ï¸</button>
        </div>
      `;
      // Complete button
      li.querySelector(".complete-btn").addEventListener("click", () => {
        tasks[index].completed = !tasks[index].completed;
        localStorage.setItem("tasks", JSON.stringify(tasks));
        renderTasks();
      });
      // Delete button
      li.querySelector(".delete-btn").addEventListener("click", () => {
        tasks.splice(index, 1);
        localStorage.setItem("tasks", JSON.stringify(tasks));
        renderTasks();
      });
      tasksList.appendChild(li);
    });

    tasksCount.textContent = tasks.length;
    completedCount.textContent = tasks.filter(t => t.completed).length;
    const percent = tasks.length === 0 ? 0 : Math.round(tasks.filter(t => t.completed).length / tasks.length * 100);
    progressPercent.textContent = percent + "%";
  }

  renderTasks();
});

  // ---- TRANSLATIONS ----
  const translations = {
    en: {
      logo:"ğŸ“˜ StudyPlanner", navDashboard:"Dashboard", navPlanner:"Study Plan", navProgress:"Progress", navSettings:"Settings",
      welcomeTitle:"Good Day, Student ğŸ‘‹", welcomeText:"Stay consistent. Small steps every day lead to success.",
      todayTasks:"ğŸ“… Todayâ€™s Tasks", completedTasks:"âœ… Completed", weeklyGoal:"ğŸ¯ Weekly Goal", progress:"ğŸ“ˆ Progress", todayFocus:"Todayâ€™s Focus"
    },
    fr: {
      logo:"ğŸ“˜ Planificateur", navDashboard:"Tableau de bord", navPlanner:"Plan d'Ã©tude", navProgress:"ProgrÃ¨s", navSettings:"ParamÃ¨tres",
      welcomeTitle:"Bonne journÃ©e, Ã‰tudiant ğŸ‘‹", welcomeText:"Restez constant. De petits pas chaque jour mÃ¨nent au succÃ¨s.",
      todayTasks:"ğŸ“… TÃ¢ches dâ€™aujourdâ€™hui", completedTasks:"âœ… TerminÃ©", weeklyGoal:"ğŸ¯ Objectif hebdomadaire", progress:"ğŸ“ˆ ProgrÃ¨s", todayFocus:"Focus du jour"
    },
    es: {
      logo:"ğŸ“˜ Planificador", navDashboard:"Tablero", navPlanner:"Plan de estudio", navProgress:"Progreso", navSettings:"ConfiguraciÃ³n",
      welcomeTitle:"Buen dÃ­a, Estudiante ğŸ‘‹", welcomeText:"Mantente constante. PequeÃ±os pasos cada dÃ­a conducen al Ã©xito.",
      todayTasks:"ğŸ“… Tareas de hoy", completedTasks:"âœ… Completadas", weeklyGoal:"ğŸ¯ Meta semanal", progress:"ğŸ“ˆ Progreso", todayFocus:"Enfoque del dÃ­a"
    }
  };

  // ---- LOAD SAVED SETTINGS ----
  let savedTheme = localStorage.getItem("theme") || "light";
  let savedLang = localStorage.getItem("language") || "en";

  body.classList.remove("light","dark");
  body.classList.add(savedTheme);
  themeHeaderBtn.textContent = savedTheme === "dark" ? "â˜€ï¸" : "ğŸŒ™";

  function updateLanguage(lang){
    document.querySelectorAll("[data-key]").forEach(el=>{
      const key = el.getAttribute("data-key");
      if(translations[lang][key]) el.innerText = translations[lang][key];
    });
  }
  updateLanguage(savedLang);

  // ---- THEME FUNCTION ----
  themeHeaderBtn.addEventListener("click", ()=>{
    const isLight = body.classList.contains("light");
    body.classList.remove(isLight?"light":"dark");
    body.classList.add(isLight?"dark":"light");
    localStorage.setItem("theme", isLight?"dark":"light");
    themeHeaderBtn.textContent = isLight?"â˜€ï¸":"ğŸŒ™";
  });

  // ---- DYNAMIC TASKS ----
  const tasks = JSON.parse(localStorage.getItem("tasks"))||[];
  document.getElementById("tasksCount").textContent = tasks.length;
  document.getElementById("completedCount").textContent = tasks.filter(t=>t.completed).length;
  const percent = tasks.length===0?0:Math.round(tasks.filter(t=>t.completed).length/tasks.length*100);
  document.getElementById("progressPercent").textContent = percent+"%";

  const tasksList = document.getElementById("tasksList");
  tasksList.innerHTML = "";
  tasks.forEach(task=>{
    const li=document.createElement("li");
    li.className=task.completed?"done":"";
    li.textContent=`${task.subject} - ${task.duration} - ${task.day}`;
    tasksList.appendChild(li);
  });
});
</script>
</body>
</html>
